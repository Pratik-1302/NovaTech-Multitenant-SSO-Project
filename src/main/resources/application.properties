# =============================================================================
# NovaTech SSO Management System - Application Configuration
# =============================================================================
# This is the default configuration for local development.
# For production deployment, use SPRING_PROFILES_ACTIVE=prod
# =============================================================================

# Application Server Configuration
server.port=${PORT:8080}
spring.application.name=NovaTech SSO Management

# Active Profile (dev by default, override with SPRING_PROFILES_ACTIVE=prod)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# =============================================================================
# Database Configuration (Development Defaults)
# =============================================================================
# For local development, these defaults connect to localhost PostgreSQL
# For production, set DATABASE_URL environment variable (Render auto-provides this)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/novatech_db}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:admin}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Connection Pool Configuration (HikariCP - default in Spring Boot)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# =============================================================================
# Security Configuration
# =============================================================================
# Session timeout (30 minutes)
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=${COOKIE_SECURE:false}
server.servlet.session.cookie.same-site=lax

# =============================================================================
# Logging Configuration
# =============================================================================
# Development: INFO level, Production: WARN level (overridden in application-prod.properties)
logging.level.root=INFO
logging.level.com.novatech.service_app=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=${SQL_LOGGING:INFO}

# =============================================================================
# Thymeleaf Configuration
# =============================================================================
spring.thymeleaf.cache=${THYMELEAF_CACHE:false}
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# =============================================================================
# File Upload Configuration
# =============================================================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =============================================================================
# Error Handling
# =============================================================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=${SHOW_STACKTRACE:on-param}
server.error.include-exception=false